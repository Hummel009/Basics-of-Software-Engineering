package main.java.hummel;

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.DecimalFormat;
import java.util.HashMap;
import java.util.Map;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingConstants;

public class SUS implements ActionListener {
	private final JButton[] زر = new JButton[50];
	private عمليةالتعداد العملية;
	private double الناتج;
	private double المدخلات1;
	private double المدخلات2;
	private final JTextField حقلالإخراج = new JTextField(20);
	private final JPanel الفريق = new JPanel();
	private int لاتشمل;
	private int[] مستبعدأرقام = { 22, 24, 25, 26, 27, 28, 29, 30, 31, 36, 37, 38, 39, 40, 41, 42 };
	private boolean يتمتمديد = false;

	public static void main(String[] الارجنتين) {
		new SUS();
	}

	public SUS() {
		JFrame الإطار = new JFrame("جافا حاسبة");

		for (int عددصحيح = 0; عددصحيح <= 49; عددصحيح++) {
			زر[عددصحيح] = new JButton();
		}

		الفريق.setLayout(new GridLayout(7, 4));

		زرالتسجيل(زر[13], "C");
		زرالتسجيل(زر[12], "e");
		زرالتسجيل(زر[11], "\u03C0");
		زرالتسجيل(زر[14], "\u00F7");

		زرالتسجيل(زر[7], "7");
		زرالتسجيل(زر[8], "8");
		زرالتسجيل(زر[9], "9");
		زرالتسجيل(زر[15], "\u00D7");

		زرالتسجيل(زر[4], "4");
		زرالتسجيل(زر[5], "5");
		زرالتسجيل(زر[6], "6");
		زرالتسجيل(زر[16], "−");

		زرالتسجيل(زر[1], "1");
		زرالتسجيل(زر[2], "2");
		زرالتسجيل(زر[3], "3");
		زرالتسجيل(زر[17], "+");

		زرالتسجيل(زر[18], "%");
		زرالتسجيل(زر[0], "0");
		زرالتسجيل(زر[10], ".");
		زرالتسجيل(زر[19], "=");

		زرالتسجيل(زر[20], "\u221A");
		زرالتسجيل(زر[21], "^");
		زرالتسجيل(زر[34], "^2");
		زرالتسجيل(زر[35], "^3");

		تسجيلزرمخفي(زر[22], "log");
		تسجيلزرمخفي(زر[24], "sin\u00B0");
		تسجيلزرمخفي(زر[25], "cos\u00B0");
		تسجيلزرمخفي(زر[26], "tg\u00B0");
		تسجيلزرمخفي(زر[27], "ctg\u00B0");
		تسجيلزرمخفي(زر[28], "arcsin");
		تسجيلزرمخفي(زر[29], "arccos");
		تسجيلزرمخفي(زر[30], "arctg");
		تسجيلزرمخفي(زر[31], "arcctg");
		تسجيلزرمخفي(زر[42], "10^");
		تسجيلزرمخفي(زر[36], "lg");
		تسجيلزرمخفي(زر[37], "ln");
		تسجيلزرمخفي(زر[38], "ch");
		تسجيلزرمخفي(زر[39], "sh");
		تسجيلزرمخفي(زر[40], "th");
		تسجيلزرمخفي(زر[41], "cth");

		زرالتسجيل(زر[43], "1/x");
		زرالتسجيل(زر[23], "n!");
		زرالتسجيل(زر[44], "n!!");

		زرالتسجيل(زر[32], "\u0418\u043D\u0436\u0435\u043D\u0435\u0440");

		حقلالإخراج.setFont(حقلالإخراج.getFont().deriveFont(40f));
		حقلالإخراج.setHorizontalAlignment(SwingConstants.RIGHT);
		حقلالإخراج.setEditable(false);
		العملية = عمليةالتعداد.لاغية;
		الإطار.add(حقلالإخراج, BorderLayout.NORTH);
		الإطار.add(الفريق, BorderLayout.CENTER);
		الإطار.setVisible(true);
		الإطار.setSize(600, 700);
		الإطار.setLocationRelativeTo(null);
	}

	public void زرالتسجيل(JButton زر, String الاسم) {
		زر.setFont(زر.getFont().deriveFont(20f));
		زر.addActionListener(this);
		زر.setText(الاسم);
		الفريق.add(زر);
	}

	public void تسجيلزرمخفي(JButton زر, String الاسم) {
		زر.setFont(زر.getFont().deriveFont(20f));
		زر.addActionListener(this);
		زر.setText(الاسم);
	}

	@Override
	public void actionPerformed(ActionEvent الحدث) {
		final JButton جبوتون = (JButton) الحدث.getSource();
		selectButton(جبوتون);
	}

	public void selectButton(JButton جبوتون) {

		Map<JButton, عمليةالتعداد> واحد = new HashMap<>();
		واحد.put(زر[23], عمليةالتعداد.FACTORIAL);
		واحد.put(زر[44], عمليةالتعداد.DOUBLEFACT);
		واحد.put(زر[20], عمليةالتعداد.الجذرالتربيعي);
		واحد.put(زر[24], عمليةالتعداد.الخطيئة);
		واحد.put(زر[25], عمليةالتعداد.كوس);
		واحد.put(زر[26], عمليةالتعداد.تيجي);
		واحد.put(زر[27], عمليةالتعداد.كتغ);
		واحد.put(زر[28], عمليةالتعداد.أركسين);
		واحد.put(زر[29], عمليةالتعداد.أركوسينوس);
		واحد.put(زر[30], عمليةالتعداد.أركتغ);
		واحد.put(زر[31], عمليةالتعداد.أركتانجنت);
		واحد.put(زر[34], عمليةالتعداد.مربع);
		واحد.put(زر[35], عمليةالتعداد.مكعب);
		واحد.put(زر[36], عمليةالتعداد.إلجي);
		واحد.put(زر[37], عمليةالتعداد.في);
		واحد.put(زر[38], عمليةالتعداد.تش);
		واحد.put(زر[39], عمليةالتعداد.ش);
		واحد.put(زر[40], عمليةالتعداد.ال);
		واحد.put(زر[41], عمليةالتعداد.كث);
		واحد.put(زر[42], عمليةالتعداد.عشرة);
		واحد.put(زر[43], عمليةالتعداد.رجوع);

		Map<JButton, عمليةالتعداد> اثنين = new HashMap<>();
		اثنين.put(زر[17], عمليةالتعداد.زائد);
		اثنين.put(زر[16], عمليةالتعداد.ناقص);
		اثنين.put(زر[15], عمليةالتعداد.متعددة);
		اثنين.put(زر[22], عمليةالتعداد.اللوغاريتم);
		اثنين.put(زر[21], عمليةالتعداد.قوة);
		اثنين.put(زر[14], عمليةالتعداد.تقسيم);
		اثنين.put(زر[18], عمليةالتعداد.النسبةالمئوية);

		Map<JButton, Integer> الفراغ = new HashMap<>();
		الفراغ.put(زر[32], 0);
		الفراغ.put(زر[13], 1);
		الفراغ.put(زر[19], 2);
		الفراغ.put(زر[12], 3);
		الفراغ.put(زر[11], 4);

		for (JButton بتن: واحد.keySet()) {
			if (جبوتون == بتن) {
				رقمواحد(واحد.get(بتن), بتن);
				break;
			}
		}

		for (JButton بتن: اثنين.keySet()) {
			if (جبوتون == بتن) {
				رقمين(اثنين.get(بتن), بتن);
				break;
			}
		}

		for (JButton بتن: الفراغ.keySet()) {
			if (جبوتون == بتن) {
				تمكين(الفراغ.get(بتن));
				break;
			}
		}

		for (int عددصحيح = 0; عددصحيح < 11; عددصحيح++) {
			if (جبوتون == زر[عددصحيح]) {
				String سلسلة = حقلالإخراج.getText();
				سلسلة += زر[عددصحيح].getText();
				حقلالإخراج.setText(سلسلة);
				break;
			}
		}
	}

	private void تمكين(int عددصحيح) {
		switch(عددصحيح) {
		case 0:
			الوضعالموسع();
			break;
		case 1:
			الناتج = المدخلات1 = المدخلات2 = 0;
			حقلالإخراج.setText("");
			break;
		case 2:
			يساوي();
			break;
		case 3:
			حقلالإخراج.setText("2.718281828459045");
			break;
		case 4:
			حقلالإخراج.setText("3.141592653589793");
		}
	}

	public void الوضعالموسع() {
		if (!يتمتمديد) {
			الفريق.setLayout(new GridLayout(11, 4));
			يتمتمديد = true;
			الفريق.remove(زر[32]);

			for (int العنصرالمستبعد : مستبعدأرقام) {
				الفريق.add(زر[العنصرالمستبعد]);
			}

			الفريق.add(زر[32]);
			زر[32].setText("\u041D\u0430\u0437\u0430\u0434");
		} else {
			الفريق.setLayout(new GridLayout(7, 4));
			يتمتمديد = false;
			الفريق.remove(زر[32]);

			for (int العنصرالمستبعد : مستبعدأرقام) {
				الفريق.remove(زر[العنصرالمستبعد]);
			}

			الفريق.add(زر[32]);
			زر[32].setText("\u0418\u043D\u0436\u0435\u043D\u0435\u0440");
		}
	}

	public void يساوي() {
		المدخلات2 = Double.parseDouble(حقلالإخراج.getText().substring(لاتشمل));

		احسب();
		final String النتيجة = new DecimalFormat("#.###############").format(الناتج);
		حقلالإخراج.setText(حقلالإخراج.getText() + "=" + النتيجة);
	}

	public void رقمواحد(عمليةالتعداد المرجع, JButton زر) {
		المدخلات1 = Double.parseDouble(حقلالإخراج.getText());
		العملية = المرجع;
		احسب();
		final String النتيجة = new DecimalFormat("#.###############").format(الناتج);
		حقلالإخراج.setText(زر.getText() + "(" + حقلالإخراج.getText() + ")" + "=" + النتيجة);
	}

	public void رقمين(عمليةالتعداد المرجع, JButton زر) {
		لاتشمل = حقلالإخراج.getText().length() + زر.getText().length();
		المدخلات1 = Double.parseDouble(حقلالإخراج.getText());
		العملية = المرجع;
		حقلالإخراج.setText(حقلالإخراج.getText() + زر.getText());
	}

	public void احسب() {
		Map<عمليةالتعداد, Double> المرجع = new HashMap<>();
		المرجع.put(عمليةالتعداد.زائد, المدخلات1 + المدخلات2);
		المرجع.put(عمليةالتعداد.ناقص, المدخلات1 - المدخلات2);
		المرجع.put(عمليةالتعداد.متعددة, المدخلات1 * المدخلات2);
		المرجع.put(عمليةالتعداد.أركسين, Math.asin(المدخلات1));
		المرجع.put(عمليةالتعداد.أركوسينوس, Math.acos(المدخلات1));
		المرجع.put(عمليةالتعداد.أركتغ, Math.atan(المدخلات1));
		المرجع.put(عمليةالتعداد.أركتانجنت, 1 / Math.atan(المدخلات1));
		المرجع.put(عمليةالتعداد.الخطيئة, Math.sin(Math.toRadians(المدخلات1)));
		المرجع.put(عمليةالتعداد.كوس, Math.cos(Math.toRadians(المدخلات1)));
		المرجع.put(عمليةالتعداد.تيجي, Math.tan(Math.toRadians(المدخلات1)));
		المرجع.put(عمليةالتعداد.كتغ, 1 / Math.tan(Math.toRadians(المدخلات1)));
		المرجع.put(عمليةالتعداد.الجذرالتربيعي, Math.sqrt(المدخلات1));
		المرجع.put(عمليةالتعداد.اللوغاريتم, Math.log10(المدخلات1) / Math.log10(المدخلات2));
		المرجع.put(عمليةالتعداد.قوة, Math.pow(المدخلات1, المدخلات2));
		المرجع.put(عمليةالتعداد.تقسيم, المدخلات1 / المدخلات2);
		المرجع.put(عمليةالتعداد.النسبةالمئوية, المدخلات2 * المدخلات1 / 100);
		المرجع.put(عمليةالتعداد.مربع, المدخلات1 * المدخلات1);
		المرجع.put(عمليةالتعداد.مكعب, Math.pow(المدخلات1, 3));
		المرجع.put(عمليةالتعداد.إلجي, Math.log10(المدخلات1));
		المرجع.put(عمليةالتعداد.في, Math.log(المدخلات1));
		المرجع.put(عمليةالتعداد.تش, (Math.pow(2.7183, المدخلات1) + Math.pow(2.7183, (-1) * المدخلات1)) / 2);
		المرجع.put(عمليةالتعداد.ش, (Math.pow(2.7183, المدخلات1) - Math.pow(2.7183, (-1) * المدخلات1)) / 2);
		المرجع.put(عمليةالتعداد.ال, (Math.pow(2.7183, المدخلات1) - Math.pow(2.7183, (-1) * المدخلات1)) / (Math.pow(2.7183, المدخلات1) + Math.pow(2.7183, (-1) * المدخلات1)));
		المرجع.put(عمليةالتعداد.كث, (Math.pow(2.7183, المدخلات1) + Math.pow(2.7183, (-1) * المدخلات1)) / (Math.pow(2.7183, المدخلات1) - Math.pow(2.7183, (-1) * المدخلات1)));
		المرجع.put(عمليةالتعداد.عشرة, Math.pow(10, المدخلات1));
		المرجع.put(عمليةالتعداد.رجوع, 1 / المدخلات1);
		المرجع.put(عمليةالتعداد.لاغية, المدخلات2);

		switch(العملية) {
		case DOUBLEFACT:
			long result2 = 1;
			for (Long k = Math.round(المدخلات1); k > 0; k = k - 2) {
				result2 = result2 * k;
			}
			الناتج = result2;
			break;
		case FACTORIAL:
			long النتيجة = 1;
			for (long عددصحيح = 1; عددصحيح <= المدخلات1; عددصحيح++) {
				النتيجة = النتيجة * عددصحيح;
			}
			الناتج = النتيجة;
			break;
		default:
			الناتج = المرجع.get(العملية);
		}
	}

	public enum عمليةالتعداد {
		لاغية, أركوسينوس, أركتانجنت, أركسين, أركتغ, كوس, كتغ, تقسيم, FACTORIAL, اللوغاريتم, ناقص, متعددة, النسبةالمئوية, زائد, قوة, الخطيئة, الجذرالتربيعي, تيجي, مربع, مكعب, إلجي, في, تش, ش, ال, كث, عشرة, رجوع, DOUBLEFACT;
	}

	public JButton جيتبوتون(int عددصحيح) {
		return زر[عددصحيح];
	}

	public boolean الحصولعلىتمديد() {
		return يتمتمديد;
	}

	public double جيتوتبوت() {
		return الناتج;
	}
}